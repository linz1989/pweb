$(function(){function t(t,i,a){var e,o,d=void 0!=a;s||(s=t.id),l[t.id+""]=i,e="<div class='"+(d?"subItem ":"")+"menu' data-nav-id='"+t.id+"'>"+t.text+"</div>",o="<div id='product_category_"+t.id+"'>";for(var n=0;n<t.list.length;n++)o+="<div class='item' pid='"+t.list[n].id+"'>                       <img src='"+t.list[n].img+"' />                       <h4>"+t.list[n].title+"</h4>                        <p>"+t.list[n].description+"</p>                   </div>";return o+="</div>",{menuHtmlStr:e,contentHtmlStr:o}}function i(){e.removeClass("curr");var t=location.hash.substr(1),i=l[t],a=$(e[i]),s="<a href='product.html#"+t+"'>"+a.text()+"</a>";if(a.addClass("curr"),o.removeClass("active"),o[i].className="active",a.hasClass("subItem")){var d=a.parent();d.slideDown(),s=d.siblings("[data-category-id="+d.attr("data-category-id")+"]").text()+" >> "+s}h.html(s)}function a(){var t=r.scrollTop();t>112&&r.width()>=1e3?(n.hasClass("fixed")||(n.addClass("fixed"),n.css("left",c.offset().left+"px")),70+n.height()+102>r.height()&&document.body.scrollHeight-r.height()-$(window).scrollTop()<82?n.addClass("bottomFixed"):n.removeClass("bottomFixed")):(n.hasClass("fixed")&&(n.removeClass("fixed"),n.css("left","0px")),n.hasClass("bottomFixed")&&n.removeClass("bottomFixed"))}var s,e,o,d=$("body").attr("data-lang"),l={},n=$("div.content-wrap>div>div.nav"),r=$(window),c=$("div.content-wrap>div"),h=$("div.path>span"),v=$("#loading");$.get("../json/product_"+d+".json",{_t:+new Date},function(d){var n,c,h,u=d.products,m="",f="",g=0;for(n=0;n<u.length;n++)if(u[n].list)h=t(u[n],g),m+=h.menuHtmlStr,f+=h.contentHtmlStr,g++;else if(u[n].category){for(m+="<div class='hasSub' data-category-id='"+u[n].id+"'>"+u[n].text+"</div><div class='menu-list subList' data-category-id='"+u[n].id+"'>",c=0;c<u[n].category.length;c++)h=t(u[n].category[c],g,u[n].id),m+=h.menuHtmlStr,f+=h.contentHtmlStr,g++;m+="</div>"}$("#leftMenu").html(m),$("#productContent").html(f),e=$("#leftMenu div.menu"),o=$("#productContent>div"),location.hash&&void 0!=l[location.hash.substr(1)]?i():location.hash=s,window.onhashchange=function(){location.hash&&void 0!=l[location.hash.substr(1)]||(location.hash=s),i()},a(),r.scroll(function(){a()}),v.removeClass("active")},"json"),$("#leftMenu").on("click","div.menu,div.hasSub",function(){var t=$(this);if(!t.hasClass("curr"))if(t.hasClass("hasSub")){var i=t.attr("data-category-id"),a=$("#leftMenu>div.menu-list[data-category-id="+i+"]");!a.is(":visible");a.slideToggle(150)}else{if(t.hasClass("subItem")){var a=t.parent();a.is(":visible")||a.slideToggle(150)}location.hash=t.attr("data-nav-id")}}),$("#productContent").on("click","div>div.item",function(){location.href="detail.html?pid="+this.getAttribute("pid")})});