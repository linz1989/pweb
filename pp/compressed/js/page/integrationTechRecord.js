require(["css!../../compressed/css/page/integrationSys.css?"+$$.rootVm.currTime,"!domReady"],function(){function a(a){r=a=a||1,$.ajax({url:"club/credit/trade/records",data:{clubId:$$.clubId,page:a,pageSize:n,userType:"tech",searchParam:i.val()},success:function(t){t.respData&&(c.dataList=t.respData,e.refresh({currPage:a,totalPage:t.pageCount}),avalon.scan(s[0]))}})}var e,t=$$.rootVm.page+"Ctrl"+ +new Date,s=$("#"+$$.rootVm.page+"Page"),n=20,r=1,i=$("#search-tel");s.attr("ms-controller",t),$$.currPath.html("积分系统 >> 技师积分记录");var c=avalon.define({$id:t,dataList:[],doClickSearchBtn:function(){a()}});e=new Pagination($("#dataListPagination"),{switchPage:function(e){a(e)}}),$("#dataListTable>table>thead>tr:eq(0)>th>div>select").on("change",function(){n=this.value,a()}),i.on("input",function(){/\D/.test(this.value)&&(this.value=this.value.replace(/\D/g,"")),this.value.length>11&&(this.value=this.value.substring(0,11))}).on("keypress",function(e){13==e.keyCode&&a()}),a()});