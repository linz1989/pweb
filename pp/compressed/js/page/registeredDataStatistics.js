require(["css!../../compressed/css/page/dataStatistics.css?"+$$.rootVm.currTime,"daterangepicker","highcharts","!domReady"],function(){function t(t,a){var r=$("#chartGroup>div.tool>a.active").attr("type"),i=formatDateRangeVal(s.val()),o=t||i.start,c=a||i.end;$.ajax({url:"club/datastatistics/register/data",data:{startDate:o,endDate:c,type:r},success:function(t){if(200==t.statusCode){t=t.respData;var a={xAxis:{categories:t.today,labels:{step:Math.round(t.today.length/10)<1?1:Math.round(t.today.length/10),staggerLines:1},tickmarkPlacement:"on"},series:[{name:"new"==r?"新增数":"累计数",data:t.counts,showInLegend:!1}],yAxis:[{title:{text:null},min:0,allowDecimals:!1}],tooltip:{},colors:["#ff7d7d"]};$("#chartGroup>div.chart").updateChart(a),avalon.scan(e[0])}}})}var a=$$.rootVm.page+"Ctrl"+ +new Date,e=$("#"+$$.rootVm.page+"Page"),s=$("#chartGroup>div.tool>div>input");e.attr("ms-controller",a),$$.currPath.html("数据统计 >> 注册用户");var r=avalon.define({$id:a,countObj:{sum:"-",count1:"-",count2:"-",count3:"-"}}),i=new Date;i.setTime(i.getTime()-2592e6),s.daterangepicker({startDate:i,endDate:new Date},function(a,e){$("#chartGroup>div.tool>div>a").removeClass("active"),t(a.format("YYYY-MM-DD"),e.format("YYYY-MM-DD"))}),$.ajax({url:"club/datastatistics/register/sumdata",success:function(t){200==t.statusCode&&t.respData&&(r.countObj=t.respData)}}),$("#chartGroup>div.tool>a").click(function(){var a=$(this);a.hasClass("active")||(a.siblings().removeClass("active"),a.addClass("active"),t())}),$("#chartGroup>div.tool>div>a").click(function(){var a=$(this);if(!a.hasClass("active")){a.siblings().removeClass("active"),a.addClass("active");var e=new Date;e.setTime(e.getTime()-24*parseInt(a.attr("type"))*60*60*1e3),s.data("daterangepicker").setStartDate(e),s.data("daterangepicker").setEndDate(new Date),t()}}),t()});