require(["!domReady"],function(){function a(a){o=a=a||1,$.ajax({url:"club/credit/exchange/applications",data:{page:a,pageSize:s},success:function(e){e.respData&&(r.dataList=e.respData,t.refresh({currPage:a,totalPage:e.pageCount}),avalon.scan(n[0]))}})}var t,e=$$.rootVm.page+"Ctrl"+ +new Date,n=$("#"+$$.rootVm.page+"Page"),s=20,o=1;n.attr("ms-controller",e),$$.currPath.html("积分系统 >> 积分兑换申请");var r=avalon.define({$id:e,dataList:[],statusObj:{approve:"已同意",reject:"已拒绝"},doHandlerApply:function(t,e){$.ajax({url:"club/credit/exchange/approve",data:{applicationId:t,status:e},success:function(t){200==t.statusCode?($$.rootVm.getMessageCount(),a(o),msgAlert(t.msg||"操作成功！",!0)):msgAlert(t.msg||"操作失败！")}})}});t=new Pagination($("#dataListPagination"),{switchPage:function(t){a(t)}}),$("#dataListTable>table>thead>tr:eq(0)>th>div>select").on("change",function(){s=this.value,a()}),a()});