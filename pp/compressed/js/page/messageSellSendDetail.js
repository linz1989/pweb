require(["css!../../compressed/css/page/"+$$.rootVm.page+".css?"+$$.rootVm.currTime,"!domReady"],function(){function a(a){i.currPage=a=a||1,$.ajax({url:"message/details",data:{page:a,pageSize:i.pageSize,messageId:r},success:function(s){200==s.statusCode?(i.successNum=s.respData.successNum,i.failNum=s.respData.failNum,i.messages=s.respData.details||[],e.refresh({currPage:a,totalPage:s.pageCount}),console.log("avalon scan...."),avalon.scan(t[0])):msgAlert(s.msg||"数据查询失败！")}})}var e,s=$$.rootVm.page+"Ctrl"+ +new Date,t=$("#"+$$.rootVm.page+"Page"),r=getParamObj("id");r||(msgAlert("页面访问参数错误！"),history.back()),t.attr("ms-controller",s),$$.currPath.html("营销中心 >> <a href='#!/messageSell'>短信营销 >> <a href='#!/messageSellDetail?id="+r+"&editable=false'>短信详情</a> >> 短信发送详情</a>");var i=avalon.define({$id:s,pageSize:20,currPage:1,messages:[],dict:{status:{S:"成功",F:"失败",N:"未发送",I:"发送中"}},successNum:0,failNum:0,doChangePageSize:function(){i.pageSize=this.value,a()}});e=new Pagination($("#dataListPagination"),{switchPage:function(e){a(e)}}),a()});