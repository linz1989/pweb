function Modal(i,t){this.ele=i,this.option=t=t||{};var e=this,o=this.ele.find("div>h3.header>span"),s=this.ele.find("div>div.footer>a.cancel"),n=this.ele.find("div>div.footer>a.ok");o[0]&&o.click(function(){e.close()}),n[0]&&t.doClickOkBtn&&n.click(function(){t.doClickOkBtn()}),s[0]&&(t.doClickCancelBtn?s.click(function(){t.doClickCancelBtn()}):s.click(function(){e.close()})),this.tip=this.ele.find("div>div.footer>span.tip"),this.ele.children("div").append("<div class='mask'><div><i></i><i></i><i></i><i></i><i></i></div></div>")}Modal.prototype.show=function(i){i&&this.ele.find("div>div.content").html(i),this.ele.css("display","block"),this.ele.removeClass("loading");var t=this.ele;setTimeout(function(){t.addClass("active")},30)},Modal.prototype.close=function(){this.ele.removeClass("active");var i=this.ele;setTimeout(function(){i.css("display","none")},500),this.option.afterClose&&this.option.afterClose()},Modal.prototype.loading=function(i){i=i||"show","show"==i?this.ele.addClass("loading"):this.ele.removeClass("loading")},Modal.prototype.showTip=function(i,t){if(this.tip&&this.tip[0]){i&&this.tip.text(i),t===!0?this.tip.addClass("ok"):this.tip.removeClass("ok"),this.tip.show();var e=this.tip;setTimeout(function(){e.hide()},3e3)}},Modal.prototype.hideClose=function(){this.ele.find("div>h3.header>span").hide()},$(function(){function i(){return t.val()?e.val()&&!/^([\.a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(e.val())?(e.focus(),!1):s.val()?!!n.text()||(n.focus(),!1):(s.focus(),!1):(t.focus(),!1)}var t=$("#user-name"),e=$("#user-email"),o=$("#user-tel"),s=$("#user-subject"),n=$("#user-content"),l=new Modal($("#contact-modal"),{doClickOkBtn:function(){i()&&(l.loading(),l.loading("hide"),t.val(""),e.val(""),o.val(""),s.val(""),n.html(""))}});$("#contact_building_btn,#contact_support_btn").click(function(){l.show()}),o.on("input",function(){/[^+\d]/.test(this.value)&&(this.value=this.value.replace(/[^+\d]/g,""))})});